# amocrm-events-monitor

Техническое задание: Выгрузка событий из amoCRM в таблицу и замер пинга системы

1. Проблема
   В процессе работы amoCRM периодически наблюдается нестабильная работа системы: задержки при работе в imbox, внутри
   сделок, отображение информации, задержки срабатывания автоматизации, медленная реакция на действия пользователей,
   зависания и т.п.
   На данный момент отсутствует инструмент, позволяющий точно определить:
   какие именно процессы, события или виджеты в amoCRM создают нагрузку;

в какое время суток возникает максимальная нагрузка;

Из-за этого невозможно провести объективный анализ производительности системы и выявить, какие процессы требуют
оптимизации.

2. Цель задачи
   Создать механизм автоматического мониторинга, который позволит:
   определять, какие типы событий создают наибольшую нагрузку на систему;

видеть, когда именно (в какие часы) система работает медленнее;

оценивать скорость отклика amoCRM (замер пинга);

собирать данные в единую таблицу, чтобы сравнивать показатели за разные периоды.

Это позволит в будущем анализировать стабильность работы CRM на долгосрочной основе, выявлять закономерности и принимать
решения об оптимизации процессов.

3. Задача (основная логика работы)
   Сбор данных из amoCRM

Необходимо собрать все события из amoCRM, которые создаются автоматизированными процессами (роботами, интеграциями,
скриптами).

Важно: исключить любые события, созданные вручную пользователями (чтобы в выгрузку не попадали пользовательские
действия).

Примеры событий:

смена ответственного,

постановка тега,

смена этапа сделки,

создание сделки,

выгрузка данных и т.п.

Фильтрация и подсчет

Система должна подсчитать количество срабатываний каждого типа события за выбранный период (по умолчанию — за прошедшие
сутки).

Далее нужно вывести ТОП-5 событий по количеству срабатываний.

Замер пинга

Один раз за каждый цикл (например, раз в час или при запуске выгрузки) нужно замерить время отклика системы — скорость
ответа amoCRM по API.

Зафиксировать максимальный пинг за день и время, когда он был зафиксирован.

Выгрузка данных

Все собранные данные должны автоматически записываться в Google-таблицу.

Формат отчета в таблице должен быть примерно следующим, но не обязательно именно таким:


Периодичность

Скрипт должен выполняться автоматически 1 раз в сутки (например, по cron-расписанию в 03:00).

4. Технические требования
   Использовать официальный API amoCRM для получения данных о событиях.

Обязательно предусмотреть обработку ошибок (в случае недоступности amoCRM — логировать ошибку и отправлять уведомление,
если предусмотрено).

5. Ожидаемый результат
   В результате выполнения задачи должно быть:
   Созданный и работающий механизм автоматической выгрузки данных из amoCRM в таблицу.

Таблица, где каждый день автоматически появляются данные с:

топ-5 событий по количеству срабатываний;

количеством этих событий;

максимальным пингом системы и временем его фиксации.

Возможность анализировать данные за разные дни и выявлять закономерности (например, в какие дни нагрузка выше).

В дальнейшем — возможность расширить инструмент (например, добавить графики нагрузки или уведомления при превышении
пороговых значений пинга).

6. Дополнительные требования (на усмотрение исполнителя)

Код должен быть документирован и размещён в общем репозитории компании.



